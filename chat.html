<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="content-type" content="text/html; charset=windows-1251">
    <title>Time of Our Game</title>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://getbootstrap.com/docs/5.2/assets/css/docs.css" rel="stylesheet">
    <link href="style.css" rel="stylesheet"  type="text/css">
</head>
<body>
    <nav class="d-flex">
        <div class="header">
            <div class="header_section nave">
                <div class="header_item header_logo">
                    <a href="index.html"><img id="logo_nav" src="images/LOGO.png"></a>
                </div>
                <div class="header_item">
                    <a href="index.html#info">О нас</a>
                </div>                
                <div class="header_item">
                    <a href="index.html#team">Состав</a>
                </div>
                <div class="header_item">  
                    <a href="index.html#match">Последние Матчи</a>
                </div>  
            </div>
            <div class="header_section">
                <div class="header_item">
                    <a href="chat.html">Чат</a>
                </div>
                <div class="header_item">
                    <a href="game.html">Игра</a>
                </div>
                <div class="header_item">
                    <a href="#connect">Связь с нами</a>
                </div>   
            </div>
        </div>
    </nav>

    [<div class="info" id="chat">]
        <form id="messageForm">
            <input type="text" name="name" id="name" />
            <input type="text" name="message" id="message" />
            <input type="submit" value="send" />
        </form>
    
        <script type="module">
            const chatEl = document.getElementById("chat");
            const ws = new WebSocket("ws://127.0.0.1:8000");
            ws.onmessage = (message) => {
                const messages = JSON.parse(message.data);
                messages.forEach((val) => {
                    const messageEl = document.createElement('div');
                    messageEl.appendChild(document.createTextNode(`${val.name}: ${val.message}`));
                    chat.appendChild(messageEl);
                })
            }
            const send = (event) => {
                event.preventDefault();
                const name = document.getElementById("name").value;
                const message = document.getElementById("message").value;
                ws.send(JSON.stringify({
                    name, message
                }))
                return false;
            }
            const formEl = document.getElementById("messageForm");
            formEl.addEventListener("submit", send);
        </script>
    
    </div>

    <div class="header connection" id="connect">
        <div class="header_section">
            <div class="header_logo">
                <img id="logo_last" src="images/LOGO.png">
            </div>
            <div class="header_section">
                <div class="header_item a_last">
                    <h6>Ссылки: </h6>
                    <a href="https://steamcommunity.com/groups/TofOG/" target="_blank">Steam</a><br>
                    <a href="https://discord.gg/PqZX3ght" target="_blank">Discord</a>
                </div> 
            </div>  
            <div class="header_section">
                <div class="header_item">
                    <h6>Почта: </h6>
                    <a href="mailto:beka.akzhulov@gmail.com">beka.akzhulov@gmail.com</a><br>
                    <a href="mailto:frostbek.money@gmail.com">frostbek.money@gmail.com</a>
                </div>    
            </div>            
        </div>
    </div>
    <div class="header connection a_last" id="last">
        <div class="header_item_1">
        <hr style="background:#000000; width: 930px; height:4px">
        <p>© Юсубаев Бекзат</p>
        </div>
    </div>
</body>
</html> 